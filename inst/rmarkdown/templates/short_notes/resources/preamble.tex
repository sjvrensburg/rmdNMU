% Additional required packages (not loaded in template)
\usepackage{amsthm}
\usepackage{thmtools}
\usepackage[most]{tcolorbox}

% Theorem styles with proper weights
\declaretheoremstyle[
   headfont=\color{nmusecondaryblue}\addfontfeatures{Weight=800}\bfseries,
   bodyfont=\itshape,
   spaceabove=10pt,
   spacebelow=10pt,
   headpunct={:}
]{nmustyle}

\declaretheoremstyle[
   headfont=\color{nmusecondaryblue}\addfontfeatures{Weight=800}\bfseries,
   bodyfont=\itshape,
   spaceabove=10pt,
   spacebelow=10pt,
   headpunct={:}
]{nmudefinitionstyle}

\declaretheoremstyle[
   headfont=\color{nmusecondaryblue}\itshape\addfontfeatures{Weight=800}\bfseries,
   bodyfont=\itshape,
   spaceabove=10pt,
   spacebelow=10pt,
   headpunct={--}
]{nmuremarkstyle}

% Section numbering
\setcounter{secnumdepth}{3}

% Theorem environments
\declaretheorem[style=nmustyle,name=Theorem,within=section]{theorem}
\declaretheorem[style=nmustyle,name=Lemma,sibling=theorem]{lemma}
\declaretheorem[style=nmustyle,name=Proposition,sibling=theorem]{proposition}
\declaretheorem[style=nmustyle,name=Corollary,sibling=theorem]{corollary}
\declaretheorem[style=nmudefinitionstyle,name=Definition,numberwithin=section]{definition}
\declaretheorem[style=nmudefinitionstyle,name=Example,sibling=definition]{example}
\declaretheorem[style=nmuremarkstyle,name=Remark,numberwithin=section]{remark}
\declaretheorem[style=nmuremarkstyle,name=Note,sibling=remark]{note}

% Proof environment
\renewenvironment{proof}{%
   \par\noindent{\color{nmuprimaryblue}\addfontfeatures{Weight=700}Proof:}\normalfont}{%
   \hfill$\blacksquare$\par}

% Custom box titles
\makeatletter
\newcommand{\customboxtitle}[2][]{%
   \ifx&#1&%
       #2%
   \else%
       #2\ #1%
   \fi%
}
\makeatother

% Custom boxes
\newtcolorbox{warningbox}[1][]{
   enhanced,
   colback=red!5,
   colframe=red!80!black,
   arc=0mm,
   title={\large\emoji{warning} #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

\newtcolorbox{ideabox}[1][]{
   enhanced,
   colback=nmuprimaryyellow!10,
   colframe=nmusecondaryyellow,
   arc=0mm,
   title={\large\emoji{light-bulb}  #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

\newtcolorbox{notebox}[1][]{
   enhanced,
   colback=nmuprimaryblue!5,
   colframe=nmuprimaryblue,
   arc=0mm,
   title={\large\emoji{memo}  #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

\newtcolorbox{tipbox}[1][]{
   enhanced,
   colback=nmuocean!10,
   colframe=nmuocean,
   arc=0mm,
   title={\large\emoji{thought-balloon} #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

\newtcolorbox{importantbox}[1][]{
   enhanced,
   colback=nmusciences!10,
   colframe=nmusciences,
   arc=0mm,
   title={\large\emoji{glowing-star} #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

\newtcolorbox{examplebox}[1][]{
   enhanced,
   colback=nmuengineering!10,
   colframe=nmuengineering,
   arc=0mm,
   title={\large\emoji{bar-chart} #1},
   fonttitle=\fontseries{sb}\selectfont,
   left=5mm,right=5mm,top=5mm,bottom=5mm
}

% Cross-referencing setup
\crefname{definition}{Definition}{Definitions}
\crefname{theorem}{Theorem}{Theorems}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{proposition}{Proposition}{Propositions}
\crefname{corollary}{Corollary}{Corollaries}
\crefname{example}{Example}{Examples}
\crefname{remark}{Remark}{Remarks}
\crefname{note}{Note}{Notes}

% Hyperref setup
\hypersetup{
   colorlinks=true,
   linkcolor=nmuprimaryblue,
   filecolor=nmuprimaryblue,
   urlcolor=nmuprimaryblue,
   citecolor=nmuprimaryblue
}
