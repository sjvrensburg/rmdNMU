\documentclass[answers, addpoints]{exam}

% Handle font size with extsizes
\usepackage[14pt]{extsizes}

% Load base template with common packages
\input{/home/stefan/R/x86_64-pc-linux-gnu-library/4.3/rmdNMU/rmarkdown/templates/common/base_template.tex}

\setmainfont{Nunito Sans}[
    Extension = .ttf,
    Path = /home/stefan/Documents/R_Packages/rmdNMU/inst/rmarkdown/templates/test/skeleton/fonts/nunito-sans/,
    UprightFont = NunitoSans-Regular,
    ItalicFont = NunitoSans-Italic,
    BoldFont = NunitoSans-Regular,
    BoldItalicFont = NunitoSans-Italic,
    UprightFeatures = {Weight=450, Scale=1.0},
    BoldFeatures = {Weight=700},
    ItalicFeatures = {Weight=450},
    BoldItalicFeatures = {Weight=700}
]

\usepackage{soul}

\marksnotpoints

% Style exam pages
\pagestyle{headandfoot}
\runningheadrule
\firstpageheader%
{\color{nmuprimaryblue}\large \textbf{}}%
{\color{nmuprimaryblue}\large \textbf{\Large Test 1 -- STAT314}}%
{\color{nmuprimaryblue}\large \textbf{}}

\runningheader%
{\color{nmusecondaryblue}\textbf{STAT314}}%
{\color{nmusecondaryblue}\textbf{}}%
{\color{nmusecondaryblue}\textbf{Page \thepage~of \numpages}}

\firstpagefooter%
{\color{nmusecondaryblue}\textbf{}}%
{\color{nmusecondaryblue}\textbf{}}%
{\color{nmusecondaryblue}\textbf{}}

\runningfooter%
{\color{nmusecondaryblue}\textbf{}}%
{\color{nmusecondaryblue}\textbf{}}%
{\color{nmusecondaryblue}\textbf{}}

\def\tick{
  \begin{tikzpicture}[scale=0.3]
    \draw[fill=black] (0,.35) -- (.25,0) -- (1,.7) -- (.25, .175) -- cycle;
    \node[above, white] at (0.35, 0.1) {\tiny 1};
    \node[below, white] at (0.7, 0.5) {\tiny 2};
  \end{tikzpicture}
}

\def\doubletick{
    \begin{tikzpicture}[scale=0.3]
        \draw[fill=black] (0,.35) -- (.25,0) -- (1,.7) -- (.25, .175) -- cycle;
        \draw[fill=black] (0.5,.35) -- (.75,0) -- (1.5,.7) -- (.75, .175) -- cycle;
        \node[above, white] at (0.35, 0.1) {\tiny 1};
        \node[below, white] at (1.2, 0.5) {\tiny 2};
    \end{tikzpicture}
}

\def\halftick{
    \begin{tikzpicture}[scale=0.3]
        \draw[fill=black] (0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle (0.75,0.2) -- (0.77,0.2)  -- (0.6,0.7) -- cycle;
        \node[above] at (0.35, 0.1) {\tiny 1};
        \node[below] at (0.7, 0.5) {\tiny 2};
    \end{tikzpicture}
}

\renewcommand{\droptotalpoints}{
  \hfill
  \fbox{\textbf{Total Marks For Question \thequestion: \totalpoints}}
}

% Create a custom environment for code in solutions
\usepackage{alltt}
\makeatletter
\newenvironment{solutioncode}{%
  \begin{solution}
  \begin{alltt}
  \color{nmuprimaryblue}
}{%
  \end{alltt}
  \end{solution}
}
\makeatother

% Code highlighting
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\newenvironment{Shaded}{}{}
\newcommand{\AlertTok}[1]{\textbf{#1}}
\newcommand{\AnnotationTok}[1]{\textit{#1}}
\newcommand{\AttributeTok}[1]{#1}
\newcommand{\BaseNTok}[1]{#1}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textit{#1}}
\newcommand{\CommentVarTok}[1]{\textit{#1}}
\newcommand{\ConstantTok}[1]{#1}
\newcommand{\ControlFlowTok}[1]{\textbf{#1}}
\newcommand{\DataTypeTok}[1]{\underline{#1}}
\newcommand{\DecValTok}[1]{#1}
\newcommand{\DocumentationTok}[1]{\textit{#1}}
\newcommand{\ErrorTok}[1]{\textbf{#1}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{#1}
\newcommand{\FunctionTok}[1]{#1}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textit{#1}}
\newcommand{\KeywordTok}[1]{\textbf{#1}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{#1}
\newcommand{\OtherTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textbf{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{#1}
\newcommand{\SpecialStringTok}[1]{#1}
\newcommand{\StringTok}[1]{#1}
\newcommand{\VariableTok}[1]{#1}
\newcommand{\VerbatimStringTok}[1]{#1}
\newcommand{\WarningTok}[1]{\textit{#1}}

\begin{document}

% Title section
{   % Use braces to keep the arraystretch change local
\renewcommand{\arraystretch}{0.8}
\begin{center}
\begin{tabular}{@{} p{4cm} @{} p{10cm} @{}}
  \toprule
  \textbf{Subject:} & Statistical Methods \\[0.3em]
  \textbf{Module Code:} & STAT314 \\[0.3em]
  \textbf{Time Limit:} & 2 Hours \\[0.3em]
  \textbf{Marks:} & \numpoints \\[0.3em]
  \textbf{Examiner:} & Dr.~Smith \\
  \bottomrule
\end{tabular}
\end{center}
}

\vspace{1cm}

% Instructions

% Points table

% Questions section
\begin{questions}
  \question[2]What is the difference between a population parameter and
  a sample statistic?

  \begin{solution}[3cm]
  A population parameter is a numerical value that describes a characteristic of an entire population, while a sample statistic is a numerical value calculated from a sample to estimate the population parameter.

  For example:
  \begin{itemize}
  \item Population mean ($\mu$) vs Sample mean ($\bar{x}$)
  \item Population variance $\sigma^2$ vs Sample variance ($s^2$)
  \end{itemize}

  Note how we used the \LaTeX  { \tt itemize} environment. Unfortunately, many markdown features do not play nicely with the {\tt exams} document class.
  \end{solution}

  \question[5]Consider the following dataset:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{314}\NormalTok{)}
\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{x =} \FunctionTok{rnorm}\NormalTok{(}\DecValTok{30}\NormalTok{, }\AttributeTok{mean =} \DecValTok{10}\NormalTok{, }\AttributeTok{sd =} \DecValTok{2}\NormalTok{),}
  \AttributeTok{y =} \FunctionTok{rnorm}\NormalTok{(}\DecValTok{30}\NormalTok{, }\AttributeTok{mean =} \DecValTok{15}\NormalTok{, }\AttributeTok{sd =} \DecValTok{3}\NormalTok{)}
\NormalTok{)}
\FunctionTok{head}\NormalTok{(data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
          x         y
1  7.423528 14.262882
2 11.454922 12.455412
3  8.334150 11.003344
4  8.592647 15.036985
5 10.254496 11.195152
6  9.330117  8.781228
\end{verbatim}

  \emph{Code does not work in solution environments. Instead, use}
  \texttt{\textbackslash{}solutioncode}. It is, unfortunately, not
  pretty and rather fragile. Then again, who asks students to write code
  with pen on paper? \emoji{upside-down-face}

  \begin{parts}
  \part[2]
  Calculate the mean and standard deviation of x.

  \begin{solutioncode}

  ``` r
  mean_x <- mean(data$x)
  sd_x <- sd(data$x)
  # Do not use cat(), sprintf() is safer.
  sprintf("Mean of x: %.4f", mean_x)
  sprintf("SD of x: %.4f", sd_x)
  ```

  ```
  [1] "Mean of x: 9.3712"
  [1] "SD of x: 1.7709"
  ```
  \end{solutioncode}

  \part[3]
  Create a scatter plot of y versus x.

  \begin{solutioncode}

  ``` r
  ggplot(data, aes(x = x, y = y)) +
    geom_point() +
    geom_smooth(method = "lm", se = FALSE) +
    labs(title = "Scatter Plot of Y vs X",
         x = "X Values",
         y = "Y Values")
  ```



  \begin{center}\includegraphics[width=0.8\linewidth]{skeleton_files/figure-latex/unnamed-chunk-2-1} \end{center}

  The plot shows the relationship between x and y with a fitted linear regression line \tick
  \end{solutioncode}
  \end{parts}
  \droptotalpoints

  \question[3]Examine the following R code and its output:

  \begin{solutioncode}
  result <- lm(y ~ x, data = data)
  summary(result)
  \end{solutioncode}

  \question[2]Indicate whether each statement is True or False:

  \begin{parts}
  \part[1]
  The sample mean is always equal to the population mean.

  \begin{solution}[1cm]
  False \tick
  \end{solution}

  \part[1]
  The standard deviation is always positive or zero.

  \begin{solution}[1cm]
  True \tick
  \end{solution}
  \end{parts}
  \droptotalpoints

  \question[3]Solve the following equation: \[
  \frac{d}{dx}(x^2 + 2x + 1) = 0
  \]

  \begin{solution}
  \begin{align*}
  \frac{d}{dx}(x^2 + 2x + 1) &= 0 \\
  2x + 2 &= 0 \\
  2x &= -2 \\
  x &= -1 \tick
  \end{align*}
  \end{solution}
\end{questions}

\end{document}
